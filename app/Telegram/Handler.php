<?

namespace App\Telegram;

use DefStudio\Telegraph\Handlers\WebhookHandler;
use Illuminate\Http\Request;
use DefStudio\Telegraph\Models\TelegraphBot;
use Illuminate\Support\Stringable;
use DefStudio\Telegraph\Facades\Telegraph;
use Illuminate\Support\Facades\Storage;
use DefStudio\Telegraph\Keyboard\ReplyKeyboard;
use DefStudio\Telegraph\Keyboard\ReplyButton;
use DefStudio\Telegraph\Keyboard\Button;
use DefStudio\Telegraph\Keyboard\Keyboard;
use Illuminate\Support\Facades\DB;
use Illuminate\Support\Carbon;
use DefStudio\Telegraph\Models\TelegraphChat;
use App\Http\Controllers\Helper;

class Handler extends WebhookHandler
{

    // ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹
    public function hello()
    {
        $this->reply('ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð­Ñ‚Ð¾ Ð¿ÐµÑ€Ð²Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ :)');
        /*         $users = DB::table('telegraph_chats')->get();
        foreach($users as $user){
            $messageToAllUsers = TelegraphChat::find($user->id);
            $messageToAllUsers->message('Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð° Ð¼Ð°ÑÑÐ¾Ð²Ð¾Ð¹ Ñ€Ð°ÑÑÑ‹Ð»ÐºÐ¸ Ð²ÑÐµÐ¼ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÐ¼ Ð±Ð¾Ñ‚Ð°')->send();
        } */
    }

    // ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ Ð½ÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹
    protected function handleUnknownCommand(Stringable $text): void
    {
        if ($text->value() === '/start') {
            $this->chat->message('
*ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð¯ - Ð³Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿ Ð±Ð¾Ñ‚ âœ¨*

Ð¯ Ð¿Ñ€ÐµÐ´ÑÐºÐ°Ð¶Ñƒ Ñ‚Ð²Ð¾Ð¹ Ð´ÐµÐ½ÑŒ Ð½Ð° Ð·Ð°Ð²Ñ‚Ñ€Ð°, Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŽ Ð²Ð°ÑˆÑƒ ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ñ Ð¿Ð°Ñ€Ñ‚Ð½ÐµÑ€Ð¾Ð¼, Ð° Ñ‚Ð°ÐºÐ¶Ðµ ÑÐ´ÐµÐ»Ð°ÑŽ Ñ€Ð°ÑÐºÐ»Ð°Ð´ Ð½Ð° ÐºÐ°Ñ€Ñ‚Ð°Ñ… Ð¢Ð°Ñ€Ð¾ ðŸ”®
            ')->photo(Storage::path('start_logo.jpeg'))->send();

            $this->chat->message('1')->replyKeyboard(Helper::replyKeybordMainPage())->send();
        } else {
            $this->reply('ÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð°Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð°');
        }
    }

    // ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ Ð²Ñ…Ð¾Ð´ÑÑ‰Ð¸Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ
    protected function handleChatMessage(Stringable $text): void
    {
        if ($text == 'ðŸ  Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ') {
            $this->chat->message('ðŸ  Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ')->replyKeyboard(Helper::replyKeybordMainPage())->send();
        }

        if ($text == 'ðŸª¬ Ð¥Ð¸Ñ€Ð¾Ð¼Ð°Ð½Ñ‚Ð¸Ñ') {
            $this->chat->message('*Ð›Ð¸Ð½Ð¸Ð¸ Ð½Ð° Ð»Ð°Ð´Ð¾Ð½Ð¸ Ð¿Ð¾Ð´ÑÐºÐ°Ð¶ÑƒÑ‚, ÐºÐ°ÐºÐ°Ñ ÑÑƒÐ´ÑŒÐ±Ð° Ð’Ð°Ñ Ð¾Ð¶Ð¸Ð´Ð°ÐµÑ‚. ÐŸÐ¾Ð·Ð½Ð°ÐºÐ¾Ð¼ÑŒÑ‚ÐµÑÑŒ Ñ Ð¾ÑÐ½Ð¾Ð²Ð°Ð¼Ð¸ ÐºÐ¸Ñ‚Ð°Ð¹ÑÐºÐ¾Ð¹ Ñ…Ð¸Ñ€Ð¾Ð¼Ð°Ð½Ñ‚Ð¸Ð¸, Ð½Ð°ÑƒÑ‡Ð¸Ñ‚ÐµÑÑŒ Ñ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ Ð»Ð¸Ð½Ð¸Ð¸ Ð½Ð° Ñ€ÑƒÐºÐµ Ð¸ ÑƒÐ·Ð½Ð°Ð¹Ñ‚Ðµ, ÐºÐ°ÐºÐ¸Ð¼Ð¸ Ð±Ñ‹Ð²Ð°ÑŽÑ‚: Ð»Ð¸Ð½Ð¸Ñ Ð¶Ð¸Ð·Ð½Ð¸, Ð»Ð¸Ð½Ð¸Ñ ÑÑƒÐ´ÑŒÐ±Ñ‹, Ð»Ð¸Ð½Ð¸Ñ Ð±Ñ€Ð°ÐºÐ°, Ð»Ð¸Ð½Ð¸Ñ Ð»ÑŽÐ±Ð²Ð¸!*

Ð¥Ð¸Ñ€Ð¾Ð¼Ð°Ð½Ñ‚Ð¸Ñ Ð¾ÑÐ½Ð¾Ð²Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð³Ð»Ð°Ð²Ð½Ñ‹Ð¼ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð¼ Ð½Ð° Ð¸Ð·ÑƒÑ‡ÐµÐ½Ð¸Ð¸ Ñ„Ð¾Ñ€Ð¼Ñ‹, Ñ†Ð²ÐµÑ‚Ð° Ð¸ Ð»Ð¸Ð½Ð¸Ð¸ Ð½Ð° Ð»Ð°Ð´Ð¾Ð½Ð¸, Ð° Ñ‚Ð°ÐºÐ¶Ðµ Ð´Ð»Ð¸Ð½Ñ‹ Ð¿Ð°Ð»ÑŒÑ†ÐµÐ². ÐÐµÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ñ…Ð¸Ñ€Ð¾Ð¼Ð°Ð½Ñ‚Ñ‹ Ñ‚Ð°ÐºÐ¶Ðµ Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÑŽÑ‚ Ð²Ð¾ Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ ÑƒÐ·Ð¾Ñ€Ñ‹ Ð½Ð° Ð¿Ð¾Ð´ÑƒÑˆÐµÑ‡ÐºÐ°Ñ… Ð¿Ð°Ð»ÑŒÑ†ÐµÐ².
Ð“Ð°Ð´Ð°Ð½Ð¸Ðµ Ð¿Ð¾ Ñ€ÑƒÐºÐµ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»Ð¸Ñ‚ÑŒ ÑƒÐ´Ð°Ñ‡Ñƒ Ð¸Ð»Ð¸ Ð½ÐµÑƒÐ´Ð°Ñ‡Ñƒ. Ð’Ð°ÑˆÐ° Ñ€ÑƒÐºÐ°, Ð»Ð¸Ð½Ð¸Ñ Ð½Ð° Ð»Ð°Ð´Ð¾Ð½Ð¸ Ð¸ Ð·Ð½Ð°Ð½Ð¸Ñ Ð¾Ð¿Ñ‹Ñ‚Ð½Ð¾Ð³Ð¾ Ñ…Ð¸Ñ€Ð¾Ð¼Ð°Ð½Ñ‚Ð° Ð¿Ð¾Ð¼Ð¾Ð³ÑƒÑ‚ ÑƒÐ·Ð½Ð°Ñ‚ÑŒ Ð¾ Ð¶Ð¸Ð·Ð½Ð¸ Ð¸ ÑÑƒÐ´ÑŒÐ±Ðµ Ð¸ Ð»ÑƒÑ‡ÑˆÐµ Ð¿Ð¾Ð½ÑÑ‚ÑŒ ÑÐµÐ±Ñ.
            ')->photo(Storage::path('hiro1.webp'))->replyKeyboard(Helper::replyKeybordMainPage())->send();

                $this->chat->message('*1. Ð›Ð¸Ð½Ð¸Ñ Ð¶Ð¸Ð·Ð½Ð¸ - Ñ‡ÐµÐ¼ Ð´Ð»Ð¸Ð½Ð½ÐµÐµ, Ñ‚ÐµÐ¼ Ð»ÑƒÑ‡ÑˆÐµ*
Ð›Ð¸Ð½Ð¸Ñ Ð¶Ð¸Ð·Ð½Ð¸ - ÐµÑ‘ Ñ‚Ð°ÐºÐ¶Ðµ Ð½Ð°Ð·Ñ‹Ð²Ð°ÑŽÑ‚ "Ð»Ð¸Ð½Ð¸ÐµÐ¹ Ð·ÐµÐ¼Ð»Ð¸". ÑÑ‚Ð¾ Ð»Ð¸Ð½Ð¸Ñ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¸Ñ‚ Ð²Ð¾ÐºÑ€ÑƒÐ³ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð³Ð¾ Ð¿Ð°Ð»ÑŒÑ†Ð°. ÐžÐ±Ñ‹Ñ‡Ð½Ð¾ ÑÑ‚Ð¾ Ð´ÑƒÐ³Ð°. Ð”Ð»Ð¸Ð½Ð° Ð»Ð¸Ð½Ð¸Ð¸ Ð¶Ð¸Ð·Ð½Ð¸ Ð½Ðµ Ð¸Ð¼ÐµÐµÑ‚ Ð¾Ñ‚Ð½Ð¾ÑˆÐµÐ½Ð¸Ñ Ðº Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸ Ð¶Ð¸Ð·Ð½Ð¸ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐºÐ°. ÐžÐ½ Ð¾Ñ‚Ñ€Ð°Ð¶Ð°ÐµÑ‚ Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ Ð¸ Ñ„Ð¸Ð·Ð¸Ñ‡ÐµÑÐºÑƒÑŽ Ð¶Ð¸Ð·Ð½ÐµÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚ÑŒ.
Ð›Ð¸Ð½Ð¸Ñ Ð¶Ð¸Ð·Ð½Ð¸ - ÑÑ‚Ð¾ Ð»Ð¸Ð½Ð¸Ñ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¸Ñ‚ Ð²Ð¾ÐºÑ€ÑƒÐ³ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð³Ð¾ Ð¿Ð°Ð»ÑŒÑ†Ð°. ÐžÐ±Ñ‹Ñ‡Ð½Ð¾ ÑÑ‚Ð¾ Ð´ÑƒÐ³Ð°. Ð”Ð»Ð¸Ð½Ð° Ð»Ð¸Ð½Ð¸Ð¸ Ð¶Ð¸Ð·Ð½Ð¸ Ð½Ðµ Ð¸Ð¼ÐµÐµÑ‚ Ð¾Ñ‚Ð½Ð¾ÑˆÐµÐ½Ð¸Ñ Ðº Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸ Ð¶Ð¸Ð·Ð½Ð¸ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐºÐ°. ÐžÐ½ Ð¾Ñ‚Ñ€Ð°Ð¶Ð°ÐµÑ‚ Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ Ð¸ Ñ„Ð¸Ð·Ð¸Ñ‡ÐµÑÐºÑƒÑŽ Ð¶Ð¸Ð·Ð½ÐµÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚ÑŒ.
            ')->photo(Storage::path('hiro2.webp'))->send();
                $this->chat->message('Ð•ÑÐ»Ð¸ Ð»Ð¸Ð½Ð¸Ñ Ð¶Ð¸Ð·Ð½Ð¸ Ð¸Ð¼ÐµÐµÑ‚ Ð±Ð¾Ð»ÑŒÑˆÑƒÑŽ Ð´ÑƒÐ³Ñƒ Ð¸ Ð²Ñ‹Ð³Ð»ÑÐ´Ð¸Ñ‚ Ñ‡ÐµÑ‚ÐºÐ¾Ð¹, ÑÑ‚Ð¾ Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚, Ñ‡Ñ‚Ð¾ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº ÑÐ½ÐµÑ€Ð³Ð¸Ñ‡ÐµÐ½. Ð§ÐµÐ¼ Ð´Ð»Ð¸Ð½Ð½ÐµÐµ Ð»Ð¸Ð½Ð¸Ñ Ð¶Ð¸Ð·Ð½Ð¸, Ñ‚ÐµÐ¼ Ð»ÑƒÑ‡ÑˆÐµ. Ð›ÑŽÐ´Ð¸ Ñ Ð´Ð»Ð¸Ð½Ð½Ð¾Ð¹ Ð»Ð¸Ð½Ð¸ÐµÐ¹ Ð¶Ð¸Ð·Ð½Ð¸ Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ Ñ…Ð¾Ñ€Ð¾ÑˆÐ¾ Ð·Ð°Ð½Ð¸Ð¼Ð°ÑŽÑ‚ÑÑ ÑÐ¿Ð¾Ñ€Ñ‚Ð¾Ð¼.
Ð•ÑÐ»Ð¸ Ð»Ð¸Ð½Ð¸Ñ Ð¶Ð¸Ð·Ð½Ð¸ Ð¸Ð¼ÐµÐµÑ‚ Ð½ÐµÐ±Ð¾Ð»ÑŒÑˆÑƒÑŽ Ð´ÑƒÐ³Ñƒ Ð¸ Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ÑÑ Ñ€ÑÐ´Ð¾Ð¼ Ñ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ð¼ Ð¿Ð°Ð»ÑŒÑ†ÐµÐ¼, ÑÑ‚Ð¾ Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚, Ñ‡Ñ‚Ð¾ ÑÑ‚Ð¾Ñ‚ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº Ð½Ðµ Ð·Ð´Ð¾Ñ€Ð¾Ð² Ð¸ Ð±Ñ‹ÑÑ‚Ñ€Ð¾ ÑƒÑÑ‚Ð°ÐµÑ‚.
            ')->photo(Storage::path('hiro3.webp'))->send();

                $this->chat->message('Ð•ÑÐ»Ð¸ Ð¸Ð¼ÐµÐµÑ‚ÑÑ Ð±Ð¾Ð»ÐµÐµ Ð¾Ð´Ð½Ð¾Ð¹ Ð»Ð¸Ð½Ð¸Ð¸ Ð¶Ð¸Ð·Ð½Ð¸, ÑÑ‚Ð¾ Ñ‚Ð°ÐºÐ¶Ðµ ÑƒÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ð½Ð° Ñ‚Ð¾, Ñ‡Ñ‚Ð¾ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº Ð¾Ñ‡ÐµÐ½ÑŒ Ð¿Ð¾Ð»Ð¾Ð½ Ð¶Ð¸Ð·Ð½Ð¸.
Ð•ÑÐ»Ð¸ Ð½Ð°Ñ‡Ð°Ð»Ð¾ Ð»Ð¸Ð½Ð¸Ð¸ Ð¶Ð¸Ð·Ð½Ð¸ (Ð¾ÐºÐ¾Ð»Ð¾ Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð½ÐºÐ¸ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð³Ð¾ Ð¿Ð°Ð»ÑŒÑ†Ð°) Ð¾Ð±Ñ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ, Ð¾Ð½ Ñ‡Ð°ÑÑ‚Ð¾ Ð±Ð¾Ð»ÐµÐ» Ð² Ð´ÐµÑ‚ÑÑ‚Ð²Ðµ.
Ð•ÑÐ»Ð¸ ÐºÐ¾Ð½ÐµÑ† Ð»Ð¸Ð½Ð¸Ð¸ Ð¶Ð¸Ð·Ð½Ð¸ (Ð¾ÐºÐ¾Ð»Ð¾ Ð·Ð°Ð¿ÑÑÑ‚ÑŒÑ) Ð²Ñ‹Ð³Ð»ÑÐ´Ð¸Ñ‚ Ð¿Ð¾Ñ‚Ñ€ÐµÐ¿Ð°Ð½Ð½Ñ‹Ð¼, ÐµÐ¼Ñƒ ÑÐ»ÐµÐ´ÑƒÐµÑ‚ ÑƒÐ´ÐµÐ»ÑÑ‚ÑŒ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸Ñ Ð½Ð° Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ, ÐºÐ¾Ð³Ð´Ð° Ð¾Ð½ ÑÑ‚Ð°Ñ€ÐµÐµÑ‚.
Ð•ÑÐ»Ð¸ Ð½Ð° Ð»Ð¸Ð½Ð¸Ð¸ ÐµÑÑ‚ÑŒ ÐºÑ€ÑƒÐ³ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ð¾ÑÑ‚Ñ€Ð¾Ð²) Ð¸Ð»Ð¸ Ð»Ð¸Ð½Ð¸Ñ Ð³Ð´Ðµ-Ñ‚Ð¾ Ñ€Ð°Ð·Ñ€ÐµÐ·Ð°Ð½Ð°, Ð¾Ð½ / Ð¾Ð½Ð° Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ñ„Ð¸Ð·Ð¸Ñ‡ÐµÑÐºÑƒÑŽ Ñ‚Ñ€Ð°Ð²Ð¼Ñƒ Ð¸Ð»Ð¸ Ð¾ÐºÐ°Ð·Ð°Ñ‚ÑŒÑÑ Ð² Ð±Ð¾Ð»ÑŒÐ½Ð¸Ñ†Ðµ. Ð Ð°Ð·Ð¼ÐµÑ€ ÐºÑ€ÑƒÐ³Ð° Ð¾Ñ‚Ñ€Ð°Ð¶Ð°ÐµÑ‚ ÑÐµÑ€ÑŒÐµÐ·Ð½Ð¾ÑÑ‚ÑŒ Ð±Ð¾Ð»ÐµÐ·Ð½Ð¸ / Ñ‚Ñ€Ð°Ð²Ð¼Ñ‹.
Ð•ÑÐ»Ð¸ Ð»Ð¸Ð½Ð¸Ñ Ð¶Ð¸Ð·Ð½Ð¸ Ð¿Ñ€ÑÐ¼Ð°Ñ Ð¸ Ð¿ÐµÑ€ÐµÑÐµÐºÐ°ÐµÑ‚ Ð»Ð°Ð´Ð¾Ð½ÑŒ Ð¿Ð°Ñ€Ð°Ð»Ð»ÐµÐ»ÑŒÐ½Ð¾ Ð»Ð¸Ð½Ð¸Ð¸ Ð³Ð¾Ð»Ð¾Ð²Ñ‹, Ð¾Ð½ / Ð¾Ð½Ð° Ñ…Ñ€Ð°Ð±Ñ€Ñ‹Ð¹ Ð¸ Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ Ð¾Ñ‡ÐµÐ½ÑŒ Ð¾Ð±Ñ‰Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº.
            ')->photo(Storage::path('hiro4.webp'))->send();

            sleep(2);
                $this->chat->message('*2. Ð›Ð¸Ð½Ð¸Ñ ÑÐµÑ€Ð´Ñ†Ð° (Ð»Ð¸Ð½Ð¸Ñ Ð»ÑŽÐ±Ð²Ð¸) - Ñ‡ÐµÐ¼ Ð´Ð»Ð¸Ð½Ð½ÐµÐµ, Ñ‚ÐµÐ¼ Ð»ÑƒÑ‡ÑˆÐµ.*
Ð›Ð¸Ð½Ð¸Ñ ÑÐµÑ€Ð´Ñ†Ð°, ÐºÐ¾Ñ‚Ð¾Ñ€ÑƒÑŽ Ð¸Ð½Ð¾Ð³Ð´Ð° Ð½Ð°Ð·Ñ‹Ð²Ð°ÑŽÑ‚ Ð»Ð¸Ð½Ð¸ÐµÐ¹ Ð»ÑŽÐ±Ð²Ð¸, - ÑÑ‚Ð¾ Ð»Ð¸Ð½Ð¸Ñ, Ð¿Ñ€Ð¾Ñ…Ð¾Ð´ÑÑ‰Ð°Ñ Ñ‡ÐµÑ€ÐµÐ· Ñ€ÑƒÐºÑƒ Ð¿Ñ€ÑÐ¼Ð¾ Ð¿Ð¾Ð´ Ð¿Ð°Ð»ÑŒÑ†Ð°Ð¼Ð¸. Ð›Ð¸Ð½Ð¸Ñ ÑÐµÑ€Ð´Ñ†Ð° Ð¾Ñ‚Ñ€Ð°Ð¶Ð°ÐµÑ‚ Ð²ÐµÑ‰Ð¸, ÑÐ²ÑÐ·Ð°Ð½Ð½Ñ‹Ðµ Ñ ÑÐµÑ€Ð´Ñ†ÐµÐ¼, Ñ‚Ð°ÐºÐ¸Ðµ ÐºÐ°Ðº Ñ‡ÑƒÐ²ÑÑ‚Ð²Ð°, Ñ€ÐµÐ°ÐºÑ†Ð¸Ð¸, ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒ Ð½Ð°Ð´ ÑÐ¼Ð¾Ñ†Ð¸ÑÐ¼Ð¸ Ð¸ Ñ‚. Ð”. Ð§ÐµÐ¼ Ð´Ð»Ð¸Ð½Ð½ÐµÐµ Ð¸ Ð¿Ñ€ÑÐ¼ÐµÐµ Ð¾Ð½Ð°, Ñ‚ÐµÐ¼ Ð»ÑƒÑ‡ÑˆÐµ.
Ð›Ð¸Ð½Ð¸Ñ Ð»ÑŽÐ±Ð²Ð¸ Ñ‚Ð°ÐºÐ¶Ðµ Ð½Ð°Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ "Ð½ÐµÐ±ÐµÑÐ½Ð¾Ð¹ Ð»Ð¸Ð½Ð¸ÐµÐ¹",
Ð•ÑÐ»Ð¸ Ð»Ð¸Ð½Ð¸Ñ ÑÐµÑ€Ð´Ñ†Ð° ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ°Ñ Ð¸ Ð¿Ñ€ÑÐ¼Ð°Ñ, Ð¾Ð½ / Ð¾Ð½Ð° Ð¼Ð°Ð»Ð¾ Ð·Ð°Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ¾Ð²Ð°Ð½Ñ‹ Ð² Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¸ Ð»ÑŽÐ±Ð²Ð¸ Ð¸Ð»Ð¸ Ñ€Ð¾Ð¼Ð°Ð½Ñ‚Ð¸ÐºÐ¸.
Ð•ÑÐ»Ð¸ Ð»Ð¸Ð½Ð¸Ñ ÑÐµÑ€Ð´Ñ†Ð° Ð´Ð»Ð¸Ð½Ð½Ð°Ñ, Ð¾Ð½, Ð²ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾, Ð±ÑƒÐ´ÐµÑ‚ Ñ…Ð¾Ñ€Ð¾ÑˆÐ¸Ð¼ Ð»ÑŽÐ±Ð¾Ð²Ð½Ð¸ÐºÐ¾Ð¼ - Ð¼Ð¸Ð»Ñ‹Ð¼, Ð¿Ð¾Ð½Ð¸Ð¼Ð°ÑŽÑ‰Ð¸Ð¼ Ð¸ Ñ€Ð¾Ð¼Ð°Ð½Ñ‚Ð¸Ñ‡Ð½Ñ‹Ð¼.
            ')->photo(Storage::path('hiro5.webp'))->send();

                $this->chat->message('Ð•ÑÐ»Ð¸ Ð»Ð¸Ð½Ð¸Ñ ÑÐµÑ€Ð´Ñ†Ð° Ð½Ð°Ñ‡Ð¸Ð½Ð°ÐµÑ‚ÑÑ Ð¾Ñ‚ ÑƒÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð³Ð¾ Ð¿Ð°Ð»ÑŒÑ†Ð°, Ð¿Ñ€ÐµÐ´ÑÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ ÑÑ‡Ð°ÑÑ‚Ð»Ð¸Ð²Ñ‹Ð¹ Ð»ÑŽÐ±Ð¾Ð².
Ð•ÑÐ»Ð¸ Ð¾Ð½ Ð½Ð°Ñ‡Ð¸Ð½Ð°ÐµÑ‚ÑÑ ÑÐ¾ ÑÑ€ÐµÐ´Ð½ÐµÐ³Ð¾ Ð¿Ð°Ð»ÑŒÑ†Ð°, ÑÑ‚Ð¾ Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚, Ñ‡Ñ‚Ð¾ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ Ð´ÑƒÐ¼Ð°ÐµÑ‚ Ð¾ ÑÐµÐ±Ðµ Ð±Ð¾Ð»ÑŒÑˆÐµ, Ñ‡ÐµÐ¼ Ð¾ ÑÐ²Ð¾ÐµÐ¼ Ð²Ð¾Ð·Ð»ÑŽÐ±Ð»ÐµÐ½Ð½Ð¾Ð¼.
Ð•ÑÐ»Ð¸ Ð»Ð¸Ð½Ð¸Ñ ÑÐµÑ€Ð´Ñ†Ð° Ð¸Ð¼ÐµÐµÑ‚ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ Ð¿Ð¾Ð´ÑŠÐµÐ¼ Ð¸ Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ, Ð¾Ð½ / Ð¾Ð½Ð°, Ð²ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾, Ð²Ð»ÑŽÐ±Ð¸Ñ‚ÑÑ Ð² Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¸Ñ… Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº.ÐšÐ°Ð¶Ð´Ð°Ñ Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð»ÑŽÐ±Ð²Ð¸ Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ Ð´Ð»Ð¸Ñ‚ÑÑ Ð½ÐµÐ´Ð¾Ð»Ð³Ð¾.
Ð•ÑÐ»Ð¸ Ð½Ð° Ð»Ð¸Ð½Ð¸Ð¸ ÑÐµÑ€Ð´Ñ†Ð° ÐµÑÑ‚ÑŒ Ð¾Ð´Ð¸Ð½ Ð¸Ð»Ð¸ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ ÐºÑ€ÑƒÐ³Ð¾Ð², Ð»Ð¸Ð½Ð¸Ñ ÑÐµÑ€Ð´Ñ†Ð° Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð° Ð½Ð° Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ‡Ð°ÑÑ‚ÐµÐ¹ Ð¸Ð»Ð¸ ÐµÑÑ‚ÑŒ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ñ… Ñ‚Ð¾Ð½ÐºÐ¸Ñ… Ð»Ð¸Ð½Ð¸Ð¹, Ð¿ÐµÑ€ÐµÑÐµÐºÐ°ÑŽÑ‰Ð¸Ñ… Ð»Ð¸Ð½Ð¸ÑŽ ÑÐµÑ€Ð´Ñ†Ð°, ÑÑ‚Ð¾ Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚, Ñ‡Ñ‚Ð¾ Ð¾Ð½ / Ð¾Ð½Ð° Ð½Ðµ Ð¾Ñ‡ÐµÐ½ÑŒ Ð´Ð¾Ð²Ð¾Ð»ÐµÐ½ ÑÐ²Ð¾ÐµÐ¹ Ð½Ñ‹Ð½ÐµÑˆÐ½ÐµÐ¹ Ð»ÑŽÐ±Ð¾Ð²Ð½Ð¾Ð¹ Ð¶Ð¸Ð·Ð½ÑŒÑŽ.
            ')->photo(Storage::path('hiro6.webp'))->send();

            sleep(2);
                $this->chat->message('*3. Ð›Ð¸Ð½Ð¸Ñ Ð¡ÑƒÐ´ÑŒÐ±Ñ‹ - Ð§Ð¸ÑÑ‚Ð°Ñ Ð¸ Ð¿Ñ€ÑÐ¼Ð°Ñ - ÑÑ‚Ð¾ Ñ…Ð¾Ñ€Ð¾ÑˆÐ¾.*
Ð›Ð¸Ð½Ð¸Ñ Ð¡ÑƒÐ´ÑŒÐ±Ñ‹, Ñ‚Ð°ÐºÐ¶Ðµ Ð½Ð°Ð·Ñ‹Ð²Ð°ÐµÐ¼Ð°Ñ Ð”ÐµÐ½ÐµÐ¶Ð½Ð°Ñ Ð»Ð¸Ð½Ð¸Ñ, "Ð»Ð¸Ð½Ð¸ÐµÐ¹ ÐºÐ°Ñ€ÑŒÐµÑ€Ñ‹",- ÑÑ‚Ð¾ Ð»Ð¸Ð½Ð¸Ñ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¸Ñ‚ Ð¾Ñ‚ Ð·Ð°Ð¿ÑÑÑ‚ÑŒÑ Ð´Ð¾ ÑÑ€ÐµÐ´Ð½ÐµÐ³Ð¾ Ð¿Ð°Ð»ÑŒÑ†Ð° Ð¸ Ð¾Ñ‚Ñ€Ð°Ð¶Ð°ÐµÑ‚ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð¸ ÐºÐ°Ñ€ÑŒÐµÑ€Ñƒ.
Ð•ÑÐ»Ð¸ Ð»Ð¸Ð½Ð¸Ñ Ð¡ÑƒÐ´ÑŒÐ±Ñ‹ Ð¸ Ð»Ð¸Ð½Ð¸Ñ Ð¶Ð¸Ð·Ð½Ð¸ Ð½Ð°Ñ‡Ð¸Ð½Ð°ÑŽÑ‚ÑÑ Ñ Ð¾Ð´Ð½Ð¾Ð¹ Ð¸ Ñ‚Ð¾Ð¹ Ð¶Ðµ Ñ‚Ð¾Ñ‡ÐºÐ¸, ÑÑ‚Ð¾Ñ‚ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ Ð°Ð¼Ð±Ð¸Ñ†Ð¸Ð¾Ð·ÐµÐ½ Ð¸ Ð¸Ð¼ÐµÐµÑ‚ ÑÐ¸Ð»ÑŒÐ½ÑƒÑŽ ÑƒÐ²ÐµÑ€ÐµÐ½Ð½Ð¾ÑÑ‚ÑŒ Ð² ÑÐµÐ±Ðµ.
Ð•ÑÐ»Ð¸ ÐµÑÑ‚ÑŒ Ð´Ð²Ðµ Ð»Ð¸Ð½Ð¸Ð¸ Ð¡ÑƒÐ´ÑŒÐ±Ñ‹, Ð¾Ð½ / Ð¾Ð½Ð° Ð¼Ð¾Ð¶ÐµÑ‚ Ð¸Ð¼ÐµÑ‚ÑŒ Ð´Ð²Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð²Ð¼ÐµÑÑ‚Ðµ Ð¸Ð»Ð¸ Ð¿Ð¾Ð±Ð¾Ñ‡Ð½Ñ‹Ð¹ Ð±Ð¸Ð·Ð½ÐµÑ.
            ')->photo(Storage::path('hiro7.webp'))->send();

                $this->chat->message('Ð•ÑÐ»Ð¸ Ð»Ð¸Ð½Ð¸Ñ Ð¡ÑƒÐ´ÑŒÐ±Ñ‹ Ð²Ñ‹Ð³Ð»ÑÐ´Ð¸Ñ‚ Ñ‡ÐµÑ‚ÐºÐ¾Ð¹ Ð¸ Ð¿Ñ€ÑÐ¼Ð¾Ð¹, ÑÑ‚Ð¾ Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚ Ñ…Ð¾Ñ€Ð¾ÑˆÐµÐµ Ð¸ ÑÑ‡Ð°ÑÑ‚Ð»Ð¸Ð²Ð¾Ðµ Ð±ÑƒÐ´ÑƒÑ‰ÐµÐµ.
Ð›Ð¸Ð½Ð¸Ñ Ð¡ÑƒÐ´ÑŒÐ±Ñ‹ Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð° Ð½Ð° Ð´Ð²Ð° Ð¸Ð»Ð¸ Ð±Ð¾Ð»ÐµÐµ Ñ€Ð°Ð·Ð´ÐµÐ»Ð¾Ð². Ð­Ñ‚Ð¾ Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚, Ñ‡Ñ‚Ð¾ ÑÑ‚Ð¾Ñ‚ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº, Ð²ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾, Ð±ÑƒÐ´ÐµÑ‚ Ñ‡Ð°ÑÑ‚Ð¾ Ð¼ÐµÐ½ÑÑ‚ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ Ð¸Ð»Ð¸ Ð² ÐµÐ³Ð¾ / ÐµÐµ Ð¶Ð¸Ð·Ð½Ð¸ / ÐºÐ°Ñ€ÑŒÐµÑ€Ðµ Ð¿Ñ€Ð¾Ð¸Ð·Ð¾Ð¹Ð´ÑƒÑ‚ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ.
Ð•ÑÐ»Ð¸ Ð»Ð¸Ð½Ð¸Ñ Ð¡ÑƒÐ´ÑŒÐ±Ñ‹ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ°Ñ, ÑÑ‚Ð¾ Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚, Ñ‡Ñ‚Ð¾ Ð¾Ð½ / Ð¾Ð½Ð° Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿ÐµÑ€ÐµÑÑ‚Ð°Ñ‚ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð´Ð¾ Ð²Ñ‹Ñ…Ð¾Ð´Ð° Ð½Ð° Ð¿ÐµÐ½ÑÐ¸ÑŽ.
            ')->photo(Storage::path('hiro8.webp'))->send();

                $this->chat->message('*4. Ð›Ð¸Ð½Ð¸Ñ ÑƒÐ¼Ñ‹ - Ñ‡ÐµÐ¼ Ñ‡ÐµÑ‚Ñ‡Ðµ Ð¸ Ð´Ð»Ð¸Ð½Ð½ÐµÐµ, Ñ‚ÐµÐ¼ Ð»ÑƒÑ‡ÑˆÐµ.*
Ð›Ð¸Ð½Ð¸Ñ ÑƒÐ¼Ñ‹ Ð¾Ñ‚Ñ€Ð°Ð¶Ð°ÐµÑ‚ Ð¸Ð½Ñ‚ÐµÐ»Ð»ÐµÐºÑ‚ Ð¸ Ð¼ÐµÐ½Ñ‚Ð°Ð»Ð¸Ñ‚ÐµÑ‚ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐºÐ°. ÐžÐ±Ñ‹Ñ‡Ð½Ð¾ Ð¾Ð½Ð° Ð½Ð°Ñ‡Ð¸Ð½Ð°ÐµÑ‚ÑÑ Ð¼ÐµÐ¶Ð´Ñƒ ÑƒÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼ Ð¸ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ð¼ Ð¿Ð°Ð»ÑŒÑ†Ð°Ð¼Ð¸ (Ð½Ð¸Ð¶Ðµ Ð»Ð¸Ð½Ð¸Ð¸ Ð»ÑŽÐ±Ð²Ð¸), Ð° Ð·Ð°Ñ‚ÐµÐ¼ Ñ‚ÑÐ½ÐµÑ‚ÑÑ Ðº Ð´Ñ€ÑƒÐ³Ð¾Ð¹ ÑÑ‚Ð¾Ñ€Ð¾Ð½Ðµ Ð»Ð°Ð´Ð¾Ð½Ð¸, ÐºÐ°Ðº Ð±ÑƒÐ´Ñ‚Ð¾ Ð¾Ð½Ð° Ñ€Ð°Ð·Ð´ÐµÐ»ÑÐµÑ‚ Ð»Ð°Ð´Ð¾Ð½ÑŒ Ð¿Ð¾Ð¿Ð¾Ð»Ð°Ð¼.
Ð§ÐµÑ‚ÐºÐ¾ÑÑ‚ÑŒ, Ñ‚Ð¾Ð½ÐºÐ¾ÑÑ‚ÑŒ Ð¸ Ð´Ð»Ð¸Ð½Ð° Ð»Ð¸Ð½Ð¸Ð¸ ÑƒÐ¼Ñ‹ Ð¾Ñ‚Ñ€Ð°Ð¶Ð°ÑŽÑ‚ ÑƒÐ¼ÑÑ‚Ð²ÐµÐ½Ð½ÑƒÑŽ ÐºÐ¾Ð½Ñ†ÐµÐ½Ñ‚Ñ€Ð°Ñ†Ð¸ÑŽ Ð¸ ÑÐ¾Ð¾Ð±Ñ€Ð°Ð·Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ.
Ð‘Ð¾Ð»ÑŒÑˆÐ°Ñ Ð´ÑƒÐ³Ð° Ð»Ð¸Ð½Ð¸Ð¸ ÑƒÐ¼Ñ‹ Ð³Ð¾Ð²Ð¾Ñ€Ð¸Ñ‚ Ð½Ð°Ð¼ Ð¾ Ñ‚Ð¾Ð¼, Ñ‡Ñ‚Ð¾ Ð¾Ð½ / Ð¾Ð½Ð° Ð±Ð¾Ð³Ð°Ñ‚Ñ‹ Ñ‚Ð²Ð¾Ñ€Ñ‡ÐµÑÑ‚Ð²Ð¾Ð¼.
ÐšÐ¾Ñ€Ð¾Ñ‚ÐºÐ°Ñ Ð»Ð¸Ð½Ð¸Ñ ÑƒÐ¼Ñ‹ Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚, Ñ‡Ñ‚Ð¾ Ñƒ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐºÐ° Ð±Ð¾Ð»ÑŒÑˆÐµ ÑˆÐ°Ð½ÑÐ¾Ð² Ð½Ð° Ñ„Ð¸Ð·Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð´Ð¾ÑÑ‚Ð¸Ð¶ÐµÐ½Ð¸Ñ, Ñ‡ÐµÐ¼ Ð½Ð° ÑƒÐ¼ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ðµ.
Ð•ÑÐ»Ð¸ Ð½Ð° Ð»Ð¸Ð½Ð¸Ð¸ ÑƒÐ¼Ñ‹ ÐµÑÑ‚ÑŒ ÐºÑ€ÑƒÐ³, Ð»Ð¸Ð½Ð¸Ñ ÑƒÐ¼Ñ‹ Ñ€Ð°Ð·Ñ€ÐµÐ·Ð°Ð½Ð° Ð½Ð° Ð´Ð²Ðµ (Ð¸Ð»Ð¸ Ð±Ð¾Ð»ÐµÐµ) Ñ‡Ð°ÑÑ‚Ð¸ Ð¸Ð»Ð¸ Ð»Ð¸Ð½Ð¸Ñ ÑƒÐ¼Ñ‹ ÐºÐ¾Ð»ÐµÐ±Ð»ÐµÑ‚ÑÑ, Ñƒ Ð½ÐµÐ³Ð¾ / Ð½ÐµÐµ ÑÑ€Ð°Ð²Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð¿Ð»Ð¾Ñ…Ð°Ñ Ð¿Ð°Ð¼ÑÑ‚ÑŒ, ÐµÐ³Ð¾ Ð»ÐµÐ³ÐºÐ¾ Ð±ÐµÑÐ¿Ð¾ÐºÐ¾ÑÑ‚ Ð´Ñ€ÑƒÐ³Ð¸Ðµ Ð¸ Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ Ð¾Ð½ Ð½Ðµ ÑÐ¾ÑÑ€ÐµÐ´Ð¾Ñ‚Ð°Ñ‡Ð¸Ð²Ð°ÐµÑ‚ÑÑ Ð½Ð° Ñ‡Ñ‚Ð¾ ÑƒÐ³Ð¾Ð´Ð½Ð¾ Ð½Ð°Ð´Ð¾Ð»Ð³Ð¾.
            ')->photo(Storage::path('hiro9.webp'))->send();

            sleep(2);

                $this->chat->message('*5. Ð›Ð¸Ð½Ð¸Ñ Ð±Ñ€Ð°ÐºÐ°*
Ð›Ð¸Ð½Ð¸Ñ Ð±Ñ€Ð°ÐºÐ° - ÑÑ‚Ð¾ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ°Ñ Ð»Ð¸Ð½Ð¸Ñ Ð½Ð°Ð´ Ð»Ð¸Ð½Ð¸ÐµÐ¹ Ð»ÑŽÐ±Ð²Ð¸, Ð½Ð°Ñ‡Ð¸Ð½Ð°ÑŽÑ‰Ð°ÑÑÑ ÑÑ€Ð°Ð·Ñƒ Ð¿Ð¾Ð´ Ð¼Ð¸Ð·Ð¸Ð½Ñ†ÐµÐ¼. ÐžÐ½Ð° Ð¾Ñ‚Ñ€Ð°Ð¶Ð°ÐµÑ‚ Ñ€Ð¾Ð¼Ð°Ð½Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¾Ñ‚Ð½Ð¾ÑˆÐµÐ½Ð¸Ñ Ð¸ Ð±Ñ€Ð°Ðº.
Ð£ ÐºÐ¾Ð³Ð¾-Ñ‚Ð¾ Ð·Ð´ÐµÑÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¾Ð´Ð½Ð° Ð»Ð¸Ð½Ð¸Ñ, Ñƒ ÐºÐ¾Ð³Ð¾-Ñ‚Ð¾ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ ÑÑ‚Ñ€Ð¾Ðº.ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑÑ‚Ñ€Ð¾Ðº Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð·Ð½Ð°Ñ‡Ð¸Ñ‚. ÐŸÑ€Ð¾ÑÑ‚Ð¾ Ð¿Ñ€Ð¾Ñ‡Ñ‚Ð¸Ñ‚Ðµ ÑÐ°Ð¼ÑƒÑŽ Ñ‡ÐµÑ‚ÐºÑƒÑŽ.
Ð•ÑÐ»Ð¸ ÐµÑÑ‚ÑŒ Ð´Ð²Ðµ Ð¾Ð´Ð¸Ð½Ð°ÐºÐ¾Ð²Ð¾ Ñ‡ÐµÑ‚ÐºÐ¸Ðµ Ð»Ð¸Ð½Ð¸Ð¸ Ð±Ñ€Ð°ÐºÐ°, ÐµÐ¼Ñƒ Ð½ÑƒÐ¶Ð½Ð¾ Ð¾ÑÑ‚ÐµÑ€ÐµÐ³Ð°Ñ‚ÑŒÑÑ Ð»ÑŽÐ±Ð¾Ð²Ð½Ð¾Ð³Ð¾ Ñ‚Ñ€ÐµÑƒÐ³Ð¾Ð»ÑŒÐ½Ð¸ÐºÐ°.
Ð•ÑÐ»Ð¸ ÐµÑÑ‚ÑŒ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð»Ð¸Ð½Ð¸Ð¹ Ð±Ñ€Ð°ÐºÐ° Ð±ÐµÐ· Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹, ÐµÐ³Ð¾ ÑÐµÐ¼ÐµÐ¹Ð½Ð°Ñ Ð¶Ð¸Ð·Ð½ÑŒ Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð½ÐµÑ€Ð°Ð´Ð¾ÑÑ‚Ð½Ð¾Ð¹.
            ')->photo(Storage::path('hiro10.webp'))->send();

                $this->chat->message('Ð•ÑÐ»Ð¸ Ð¾Ñ‡ÐµÑ€ÐµÐ´ÑŒ Ð¸Ð´ÐµÑ‚ Ð²Ð²ÐµÑ€Ñ… Ð¸Ð»Ð¸ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ°Ñ Ð¸ Ð½ÐµÐ³Ð»ÑƒÐ±Ð¾ÐºÐ°Ñ, Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ Ð¾Ð½ / Ð¾Ð½Ð° Ð½Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ð¶ÐµÐ½Ð¸Ñ‚ÑŒÑÑ Ð¸Ð»Ð¸ Ð¶ÐµÐ½Ð¸Ñ‚ÑÑ Ð¾Ñ‡ÐµÐ½ÑŒ Ð¿Ð¾Ð·Ð´Ð½Ð¾.
Ð•ÑÐ»Ð¸ Ð»Ð¸Ð½Ð¸Ñ Ð±Ñ€Ð°ÐºÐ° Ñ‚ÑÐ½ÐµÑ‚ÑÑ Ð´Ð¾ Ð¼Ð¸Ð·Ð¸Ð½Ñ†Ð° Ð¸Ð»Ð¸ Ð±ÐµÐ·Ñ‹Ð¼ÑÐ½Ð½Ð¾Ð³Ð¾ Ð¿Ð°Ð»ÑŒÑ†Ð°, Ñƒ ÑÑ‚Ð¾Ð³Ð¾ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐºÐ° Ð²Ñ‹ÑÐ¾ÐºÐ¸Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¿Ñ€Ð¸ Ð²Ñ‹Ð±Ð¾Ñ€Ðµ ÑÑƒÐ¿Ñ€ÑƒÐ³Ð°.
Ð•ÑÐ»Ð¸ Ð»Ð¸Ð½Ð¸Ñ Ð±Ñ€Ð°ÐºÐ° Ñ‚ÑÐ½ÐµÑ‚ÑÑ Ð´Ð¾ Ð±ÐµÐ·Ñ‹Ð¼ÑÐ½Ð½Ð¾Ð³Ð¾ Ð¿Ð°Ð»ÑŒÑ†Ð°, ÑÑ‚Ð¾ Ð³Ð¾Ð²Ð¾Ñ€Ð¸Ñ‚ Ð¾ Ñ‚Ð¾Ð¼, Ñ‡Ñ‚Ð¾ ÑÐµÐ¼ÑŒÑ ÐµÐ³Ð¾ / ÐµÐµ ÑÑƒÐ¿Ñ€ÑƒÐ³Ð° Ð±Ð¾Ð³Ð°Ñ‚Ð° Ð¸ Ð´Ñ€ÑƒÐ¶Ð½Ð°.
ÐžÐ´Ð½Ð°ÐºÐ¾ ÐµÑÐ»Ð¸ Ð»Ð¸Ð½Ð¸Ñ Ð±Ñ€Ð°ÐºÐ° Ñ‚ÑÐ½ÑƒÑ‚ÑŒÑÑ Ð´Ð°Ð»ÑŒÑˆÐµ Ñ‚Ñ€ÐµÑ‚ÑŒÐµÐ³Ð¾ Ð¿Ð°Ð»ÑŒÑ†Ð° - Ð½ÐµÑ…Ð¾Ñ€Ð¾ÑˆÐ¾: Ð±Ñ€Ð°Ðº Ð¼Ð¾Ð¶ÐµÑ‚ ÑÐºÐ°Ð·Ð°Ñ‚ÑŒÑÑ Ð½Ð° Ñ€ÐµÐ¿ÑƒÑ‚Ð°Ñ†Ð¸Ð¸ Ð¸ Ð±Ð¾Ð³Ð°Ñ‚ÑÑ‚Ð²Ðµ.
            ')->photo(Storage::path('hiro11.webp'))->send();

        }

        if ($text == 'ðŸ”® Ð“Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿' || $text == 'ðŸ’Ÿ Ð›ÑŽÐ±Ð¾Ð²Ð½Ñ‹Ð¹ Ð³Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿') {

            if ($text == 'ðŸ”® Ð“Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿'){
                $textMessage = '*ðŸ”® Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð’Ð°Ñˆ Ð·Ð½Ð°Ðº Ð·Ð¾Ð´Ð¸Ð°ÐºÐ°, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑƒÐ·Ð½Ð°Ñ‚ÑŒ Ð³Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿ Ð½Ð° ÑÐµÐ³Ð¾Ð´Ð½Ñ*';
                $messageIMG = 'horoscope.jpg';
            }
            if ($text == 'ðŸ’Ÿ Ð›ÑŽÐ±Ð¾Ð²Ð½Ñ‹Ð¹ Ð³Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿'){
                $textMessage = '*ðŸ’Ÿ Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð’Ð°Ñˆ Ð·Ð½Ð°Ðº Ð·Ð¾Ð´Ð¸Ð°ÐºÐ°, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑƒÐ·Ð½Ð°Ñ‚ÑŒ ðŸ’ž Ð»ÑŽÐ±Ð¾Ð²Ð½Ñ‹Ð¹ Ð³Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿ Ð½Ð° ÑÐµÐ³Ð¾Ð´Ð½Ñ*';
                $messageIMG = 'love_horocope2.jpg';
            }

            $this->chat->message("$textMessage")->photo(Storage::path("$messageIMG"))
                ->replyKeyboard(Helper::replyKeybordZodiac())->send();

            if ($text == 'ðŸ”® Ð“Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿') {
                $horoscope_type = 'general';
            }
            if ($text == 'ðŸ’Ÿ Ð›ÑŽÐ±Ð¾Ð²Ð½Ñ‹Ð¹ Ð³Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿') {
                $horoscope_type = 'love';
            }
            // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ñ‚Ð¸Ð¿ Ð³Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿Ð° Ð² Ð‘Ð”
            DB::table('telegraph_chats')
                ->where('chat_id', $this->chat->chat_id)
                ->update([
                    'horoscope_type' => $horoscope_type
                ]);
        }

        if($text == 'â™ˆï¸ ÐžÐ²ÐµÐ½' || $text == 'â™‰ï¸ Ð¢ÐµÐ»ÐµÑ†' || $text == 'â™Šï¸ Ð‘Ð»Ð¸Ð·Ð½ÐµÑ†Ñ‹' || $text == 'â™‹ï¸ Ð Ð°Ðº'
            || $text == 'â™Œï¸ Ð›ÐµÐ²' || $text == 'â™ï¸ Ð”ÐµÐ²Ð°' || $text == 'â™Žï¸ Ð’ÐµÑÑ‹' || $text == 'â™ï¸ Ð¡ÐºÐ¾Ñ€Ð¿Ð¸Ð¾Ð½'
            || $text == 'â™ï¸ Ð¡Ñ‚Ñ€ÐµÐ»ÐµÑ†' || $text == 'â™‘ï¸ ÐšÐ¾Ð·ÐµÑ€Ð¾Ð³' || $text == 'â™’ï¸ Ð’Ð¾Ð´Ð¾Ð»ÐµÐ¹' || $text == 'â™“ï¸ Ð Ñ‹Ð±Ñ‹'){

            // ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ñ Ð·Ð¾Ð´Ð¸Ð°ÐºÐ° Ð½Ð° Ð°Ð½Ð³Ð».
            $zodiac = Helper::zodiacName($text);

            $userChat = DB::table('telegraph_chats')
                ->select('last_zodiac', 'horoscope_type')->where('chat_id', $this->chat->chat_id)
                ->first();

            $homepage = file_get_contents("https://orakul.com/horoscope/astrologic/{$userChat->horoscope_type}/{$zodiac}/today.html");
            $pattern = '/<div class="horoBlock">(.*?)>(.*?)<\/div>/s';
            if (preg_match($pattern, $homepage, $matches)) {
                $foundText = $matches[2];
                $horo = trim(stristr($foundText, '<', true));
            } else {
                $horo = "Ð“Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½";
            }

            $dt = Carbon::now();
            $todayDate = str_replace('-', '.', $dt->format('d.m.Y'));

            $this->chat->message("*$text* Ð½Ð° $todayDate

ðŸ”® $horo")->replyKeyboard(Helper::replyKeybordHelperDate())->send();

            // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¹ Ð³Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿ Ð² Ð‘Ð”
            DB::table('telegraph_chats')
                ->where('chat_id', $this->chat->chat_id)
                ->update(['last_zodiac' => $zodiac]);
        }

        // Ð“Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿ Ð½Ð° Ð·Ð°Ð²Ñ‚Ñ€Ð°
        if ($text == 'ÐÐ° Ð·Ð°Ð²Ñ‚Ñ€Ð°') {

            $userChat = DB::table('telegraph_chats')
                ->select('last_zodiac', 'horoscope_type')->where('chat_id', $this->chat->chat_id)
                ->first();

            $homepage = file_get_contents("https://orakul.com/horoscope/astrologic/{$userChat->horoscope_type}/{$userChat->last_zodiac}/tomorrow.html");
            $pattern = '/<div class="horoBlock">(.*?)>(.*?)<\/div>/s';
            if (preg_match($pattern, $homepage, $matches)) {
                $foundText = $matches[2];
                $horo = trim(stristr($foundText, '<', true));
            } else {
                $horo = "Ð“Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½";
            }

            $this->chat->message("ðŸ”® $horo")->replyKeyboard(Helper::replyKeybordHelperDate())->send();

            // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¹ Ð³Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿ Ð² Ð‘Ð”
            DB::table('telegraph_chats')
                ->where('chat_id', $this->chat->chat_id)
                ->update(['last_zodiac' => $userChat->last_zodiac]);
        }

        // Ð“Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿ Ð½Ð° Ð½ÐµÐ´ÐµÐ»ÑŽ
        if ($text == 'ÐÐ° Ð½ÐµÐ´ÐµÐ»ÑŽ') {

            $userChat = DB::table('telegraph_chats')
                ->select('last_zodiac', 'horoscope_type')->where('chat_id', $this->chat->chat_id)
                ->first();

            $homepage = file_get_contents("https://orakul.com/horoscope/astrologic/{$userChat->horoscope_type}/{$userChat->last_zodiac}/week.html");
            $pattern = '/<div class="horoBlock">(.*?)>(.*?)<\/div>/s';
            if (preg_match($pattern, $homepage, $matches)) {
                $foundText = $matches[2];
                $horo = trim(stristr($foundText, '<', true));
            } else {
                $horo = "Ð“Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½";
            }

            $this->chat->message("ðŸ”® $horo")->replyKeyboard(Helper::replyKeybordHelperDate())->send();

            // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¹ Ð³Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿ Ð² Ð‘Ð”
            DB::table('telegraph_chats')
                ->where('chat_id', $this->chat->chat_id)
                ->update(['last_zodiac' => $userChat->last_zodiac]);
        }

        // Ð“Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿ Ð½Ð° Ð¼ÐµÑÑÑ†
        if ($text == 'ÐÐ° Ð¼ÐµÑÑÑ†') {

            $userChat = DB::table('telegraph_chats')
                ->select('last_zodiac', 'horoscope_type')->where('chat_id', $this->chat->chat_id)
                ->first();

            $homepage = file_get_contents("https://orakul.com/horoscope/astrologic/{$userChat->horoscope_type}/{$userChat->last_zodiac}/month.html");
            $pattern = '/<div class="horoBlock">(.*?)>(.*?)<\/div>/s';
            if (preg_match($pattern, $homepage, $matches)) {
                $foundText = $matches[2];
                $horo = trim(stristr($foundText, '<', true));
            } else {
                $horo = "Ð“Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½";
            }

            $this->chat->message("ðŸ”® $horo")->replyKeyboard(Helper::replyKeybordHelperDate())->send();

            // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¹ Ð³Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿ Ð² Ð‘Ð”
            DB::table('telegraph_chats')
                ->where('chat_id', $this->chat->chat_id)
                ->update(['last_zodiac' => $userChat->last_zodiac]);
        }

        // Ð“Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿ Ð½Ð° Ð³Ð¾Ð´
        if ($text == 'ÐÐ° Ð³Ð¾Ð´') {

            $userChat = DB::table('telegraph_chats')
                ->select('last_zodiac', 'horoscope_type')->where('chat_id', $this->chat->chat_id)
                ->first();

            $homepage = file_get_contents("https://orakul.com/horoscope/astrologic/{$userChat->horoscope_type}/{$userChat->last_zodiac}/year.html");
            $pattern = '/<div class="horoBlock">(.*?)>(.*?)<\/div>/s';
            if (preg_match($pattern, $homepage, $matches)) {
                $foundText = $matches[2];
                $horo = trim(stristr($foundText, '<', true));
            } else {
                $horo = "Ð“Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½";
            }

            $this->chat->message("ðŸ”® $horo")->replyKeyboard(Helper::replyKeybordHelperDate())->send();

            // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¹ Ð³Ð¾Ñ€Ð¾ÑÐºÐ¾Ð¿ Ð² Ð‘Ð”
            DB::table('telegraph_chats')
                ->where('chat_id', $this->chat->chat_id)
                ->update(['last_zodiac' => $userChat->last_zodiac]);
        }

        // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð´Ð°Ñ‚Ñƒ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ³Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ° Ðº Ð±Ð¾Ñ‚Ñƒ
        DB::table('telegraph_chats')
        ->where('chat_id', $this->chat->chat_id)
        ->update(['updated_at' => Carbon::now()]);
    }
}
